<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡ â€” Ù†Ø³Ø®Ø© Ù…ÙˆØ³Ø¹Ø©</title>
  <meta name="theme-color" content="#2563eb">

  <style>
    body{
      margin:0;font-family:system-ui,"Noto Sans Arabic",sans-serif;
      background:linear-gradient(160deg,#1e3a8a,#2563eb);
      color:#fff;display:flex;align-items:center;justify-content:center;
      height:100vh;
    }
    .app{
      width:min(700px,92vw);
      background:rgba(255,255,255,0.08);
      backdrop-filter:blur(6px);
      border-radius:16px;padding:20px;
      box-shadow:0 10px 30px rgba(0,0,0,0.4);
    }
    h1{text-align:center;margin:0 0 16px;font-size:1.5rem}
    .question{font-weight:700;margin-bottom:12px}
    .options{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
    button{
      padding:10px;border:none;border-radius:8px;
      background:#2563eb;color:#fff;font-weight:700;
      cursor:pointer;transition:.2s;
    }
    button:hover{background:#3b82f6}
    .score{text-align:center;font-size:1.2rem;margin-top:12px}
    #installBtn{margin-top:16px;width:100%;background:#1e40af}
  </style>
</head>
<body>
  <div class="app">
    <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø£Ø°ÙƒÙŠØ§Ø¡</h1>
    <div id="quiz"></div>
    <div class="score">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
    <button id="installBtn">ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
  </div>

<script>
(function(){
  const questions=[
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ Ø¶Ø±Ø¨ØªÙ‡ Ø¨Ù†ÙØ³Ù‡ ÙˆØ£Ø¶ÙØª 1 ÙŠØ¹Ø·ÙŠ 10ØŸ",opts:["3","9","4","5"],ans:0},
    {q:"Ø´ÙŠØ¡ ÙŠØ²Ø¯Ø§Ø¯ ÙƒÙ„Ù…Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ØŒ Ù…Ø§ Ù‡ÙˆØŸ",opts:["Ø§Ù„Ø¹Ù…Ø±","Ø§Ù„Ø­ÙØ±Ø©","Ø§Ù„Ù…Ø¹Ø±ÙØ©","Ø§Ù„ÙˆÙ‚Øª"],ans:1},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ù„Ù‡ Ù‚Ù„Ø¨ ÙˆÙ„Ø§ ÙŠÙ†Ø¨Ø¶ØŸ",opts:["Ø§Ù„Ø³Ø§Ø¹Ø©","Ø§Ù„ÙƒØªØ§Ø¨","Ø§Ù„ÙƒØ±Ø©","Ø§Ù„Ø²Ù‡Ø±Ø©"],ans:0},
    {q:"ÙŠÙ…Ø´ÙŠ Ø¨Ù„Ø§ Ù‚Ø¯Ù…ÙŠÙ† ÙˆÙŠØ¯Ø®Ù„ Ø§Ù„Ø£Ø°Ù† Ø¨Ù„Ø§ Ø£Ø°Ù†ÙŠÙ†ØŸ",opts:["Ø§Ù„Ù‡ÙˆØ§Ø¡","Ø§Ù„ØµÙˆØª","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„Ø¸Ù„"],ans:1},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙƒØªØ¨ ÙˆÙ„Ø§ ÙŠÙ‚Ø±Ø£ØŸ",opts:["Ø§Ù„Ù‚Ù„Ù…","Ø§Ù„ÙƒØªØ§Ø¨","Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±","Ø§Ù„Ù…Ø¬Ù„Ø©"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ Ø°ÙƒØ±ØªÙ‡ ÙƒØ³Ø±ØªÙ‡ØŸ",opts:["Ø§Ù„ØµÙ…Øª","Ø§Ù„Ø²Ø¬Ø§Ø¬","Ø§Ù„Ù‚Ù„Ø¨","Ø§Ù„Ø³Ø±"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ù„Ù‡ Ø£Ø³Ù†Ø§Ù† ÙˆÙ„Ø§ ÙŠØ¹Ø¶ØŸ",opts:["Ø§Ù„Ù…Ø´Ø·","Ø§Ù„Ù…Ù†Ø´Ø§Ø±","Ø§Ù„ÙØ±Ø´Ø§Ø©","Ø§Ù„Ù…ÙØªØ§Ø­"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ Ù…Ø´Ù‰ Ù‚Ø·Ø¹ ÙˆØ¥Ø°Ø§ ÙˆÙ‚Ù ØºØ·Ù‰ØŸ",opts:["Ø§Ù„Ø¸Ù„","Ø§Ù„ÙˆÙ‚Øª","Ø§Ù„Ù†Ù‡Ø±","Ø§Ù„Ø±ÙŠØ­"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ù… ÙˆÙ„Ø§ ÙŠØ³ØªÙŠÙ‚Ø¸ØŸ",opts:["Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù†Ù‡Ø±","Ø§Ù„ÙƒØªØ§Ø¨","Ø§Ù„Ø³Ø§Ø¹Ø©"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ³Ù…Ø¹ Ø¨Ù„Ø§ Ø£Ø°Ù† ÙˆÙŠØªÙƒÙ„Ù… Ø¨Ù„Ø§ Ù„Ø³Ø§Ù†ØŸ",opts:["Ø§Ù„Ù‡Ø§ØªÙ","Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ","Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±","Ø§Ù„ØªÙ„ÙØ§Ø²"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ ÙˆØ¶Ø¹ØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡ Ù„Ø§ ÙŠØ¨ØªÙ„ØŸ",opts:["Ø§Ù„Ø¸Ù„","Ø§Ù„Ø²ÙŠØª","Ø§Ù„Ø²Ø¬Ø§Ø¬","Ø§Ù„Ù‡ÙˆØ§Ø¡"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ·ÙŠØ± Ø¨Ù„Ø§ Ø¬Ù†Ø§Ø­ ÙˆÙŠØ¨ÙƒÙŠ Ø¨Ù„Ø§ Ø¹ÙŠÙ†ØŸ",opts:["Ø§Ù„Ø³Ø­Ø§Ø¨","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„Ø±ÙŠØ­","Ø§Ù„ØµÙˆØª"],ans:0},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØª ÙˆÙ„Ø§ ÙŠØ±Ø§Ù‡ Ø£Ø­Ø¯ØŸ",opts:["Ø§Ù„Ù‡ÙˆØ§Ø¡","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„ØµÙˆØª","Ø§Ù„Ø¸Ù„"],ans:1},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ù„Ù‡ Ø£Ø±Ø¨Ø¹ Ø£Ø±Ø¬Ù„ ÙˆÙ„Ø§ ÙŠÙ…Ø´ÙŠØŸ",opts:["Ø§Ù„ÙƒØ±Ø³ÙŠ","Ø§Ù„Ø·Ø§ÙˆÙ„Ø©","Ø§Ù„Ø³Ø±ÙŠØ±","ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚"],ans:3},
    {q:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ Ø£ÙƒÙ„ØªÙ‡ ÙƒÙ„Ù‡ ØªØ¨Ù‚Ù‰ Ø¬Ø§Ø¦Ø¹Ù‹Ø§ØŸ",opts:["Ø§Ù„Ù‡ÙˆØ§Ø¡","Ø§Ù„Ù†Ø§Ø±","Ø§Ù„Ù…Ù„Ø­","Ø§Ù„ÙˆÙ‚Øª"],ans:1}
  ];
  let current=0,score=0;
  const quizEl=document.getElementById('quiz');
  const scoreEl=document.getElementById('score');

  function showQuestion(){
    if(current>=questions.length){
      quizEl.innerHTML="<div class='question'>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ðŸŽ‰ Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: "+score+"</div>";
      return;
    }
    const q=questions[current];
    quizEl.innerHTML="";
    const qEl=document.createElement('div');
    qEl.className="question";qEl.textContent=q.q;
    quizEl.appendChild(qEl);
    const optsEl=document.createElement('div');
    optsEl.className="options";
    q.opts.forEach((opt,i)=>{
      const btn=document.createElement('button');
      btn.textContent=opt;
      btn.onclick=()=>{
        if(i===q.ans){score+=10;scoreEl.textContent=score}
        current++;showQuestion();
      };
      optsEl.appendChild(btn);
    });
    quizEl.appendChild(optsEl);
  }
  showQuestion();

  // Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª
  const installBtn=document.getElementById('installBtn');
  let deferredPrompt=null;
  window.addEventListener('beforeinstallprompt',(e)=>{
    e.preventDefault(); deferredPrompt=e;
    installBtn.style.display="block";
  });
  installBtn.onclick=async()=>{
    if(deferredPrompt){
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt=null;
    }else alert("Ø¬Ø±Ù‘Ø¨ Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­");
  };

  // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
  async function createIcon(size){
    const canvas=document.createElement('canvas');
    canvas.width=size;canvas.height=size;
    const ctx=canvas.getContext('2d');
    ctx.fillStyle="#2563eb";ctx.fillRect(0,0,size,size);
    ctx.fillStyle="#fff";ctx.font=`${size*0.4}px sans-serif`;
    ctx.textAlign="center";ctx.textBaseline="middle";
    ctx.fillText("IQ",size/2,size/2);
    const blob=await new Promise(res=>canvas.toBlob(res,'image/png'));
    return URL.createObjectURL(blob);
  }

  async function setupManifest(){
    const icon192=await createIcon(192);
    const icon512=await createIcon(512);
    const manifest={
      name:"IQ Quiz â€” Expanded",
      short_name:"IQQuiz",
      start_url:"./",
      display:"standalone",
      background_color:"#ffffff",
      theme_color:"#2563eb",
      icons:[
        {src:icon192,sizes:"192x192",type:"image/png"},
        {src:icon512,sizes:"512x512",type:"image/png"}
      ]
    };
    const blob=new Blob([JSON.stringify(manifest)],{type:'application/json'});
    const url=URL.createObjectURL(blob);
    const link=document.createElement('link');
    link.rel='manifest';link.href=url;
    document.head.appendChild(link);
  }

  async function setupSW(){
    if(!('serviceWorker' in navigator)) return;
    const swCode=`
      const CACHE='quiz-expanded-v1';
      self.addEventListener('install',e=>{
        e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./'])));
        self.skipWaiting();
      });
      self.addEventListener('activate',e=>{
        e.waitUntil(caches.keys().then(keys=>Promise.all(keys.filter(k=>k!==CACHE).map(k=>caches.delete(k)))));
        self.clients.claim();
      });
      self.addEventListener('fetch',e=>{
        e.respondWith(
          caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{
            const copy=res.clone();
            caches.open(CACHE).then(c=>c.put(e.request,copy));
            return res;
          }))
        );
      });
    `;
    const blob=new Blob([swCode],{type:'application/javascript'});
    const url=URL.createObjectURL(blob);
    navigator.serviceWorker.register(url,{scope:'./'});
  }

  (async function boot(){
    await setupManifest();
    await setupSW();
  })();
})();
</script>
</body>
</html>
